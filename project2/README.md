Όνομα: Nikolaos Pnevmatikos

-------------------------------------------------------------------------------------------------

compile:

    client: make client
    server: make server

run:

    client: ./remoteClient -i <server_ip> -p <server_port> -d <directory>
    server: ./dataServer -p <port> -s <thread_pool_size> -q <queue_size> -b <block_size>

-------------------------------------------------------------------------------------------------

O server πριν αρχίσει να δέχεται συνδέσεις από clients δημιουργεί τα worker threads.
Με κάθε νέα σύνδεση δημιουργείται ένας communicator thread.

Ο communication thread λαμβάνει από τον client αρχικά τον φάκελο τον οποιο θέλει ο client.
Από εκεί καλεί την συνάρτηση findfiles όπου αναδρομικά βάζει σε μια λίστα όλα τα αρχεία του φακέλου μαζί με το μονοπάτι τους (πχ path/.../path/file). Αφού βρει όλα τα αρχεία του φακέλου, στέλνει στον client τον αριθμό των αρχείων που θα αντιγράψει ώστε ο client να ξέρεις πόσες φορες θα κάνει επαναληπτικά την ίδια διαδικασία. Μετά αρχίζει να τα προσθέτει στην ουρα, η οποια είναι κοινή για όλους, και αν η ουρα γεμίσει τότε ο communicator thread τίθεται σε παύση. Με το που βάζει κάποιο στοιχειο στη λίστα στέλνει σήμα στον worker thread να ξεκινήσει.

Ο worker thread με το που ξεκινάει αν η ουρα είναι κενή σταματάει μέχρι να του στείλει σήμα ο communication thread. Αφού ξαναξεκινήσει βγάζει από την ουρα ένα αρχείο και στέλνει σήμα να συνεχίσει ο communicator thread σε περίπτωση που είναι σταματημένος. Μετά στέλνει στον client το όνομα του αρχείου, Στέλνει τα συνολικά byte του αρχείου και μετά στέλνει τα περιεχόμενα του αρχείου ανά block size την φορα. Τέλος αν το αρχείο ήταν το τελευταίο αρχείο του φακέλου κλείνει το socket επικοινωνίας με τον server.

Ο client με την σειρά του αφού συνδεθεί με τον server στέλνει στον server τον φάκελο που θέλει να αντιγράψει και μετά λαμβάνει από αυτόν τον αριθμό τον αρχείων που είναι στο φάκελο. Για κάθε αρχείο οπότε λαμβάνει το όνομα του, δημιουργεί τους φακέλους που το περιέχουν και τέλος δημιουργεί το ίδιο το αρχείο. Μετά λαμβάνει το συνολικό μέγεθος του αρχείου σε byte και επαναληπτικά μέχρι να συμπληρωθούν τα bytes του αρχείου λαμβάνει τα περιεχόμενα του αρχείου.




